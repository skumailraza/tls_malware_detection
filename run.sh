#!/bin/bash

if [ -z $1 ]; then
	echo Dataset name missed. Please give a dataset name.
	exit 1
fi

DATASET=$1

# -c		cert-aggressive merging
# -p		payload-aggressive merging
# -t		generate cluster with tor-like connections
# --meanshift	use meanshift for clustering
# --score	apply FISHDBC optimizing score, can be either f1, precision or recall
# --single	apply FISHDBC with fixed parameters
# --debug	verbose debugging

# Run heuristic clustering (cert-aggresive and grouping tor connections), meanshift clustering and fishdbc clustering (precision optimizing):
time python clustering/run_clustering.py -c -t --meanshift --score=precision --debug "$DATASET" 2> "$DATASET".err > "$DATASET".out

# Run just heuristic clustering:
#time python clustering/run_clustering.py --debug "$DATASET" 2> "$DATASET".err > "$DATASET".out

# Run heuristic clustering and fishdbc clustering with single parameters:
#time python clustering/run_clustering.py --single --debug "$DATASET" 2> "$DATASET".err > "$DATASET".out

echo Done.
